job: extension
config:
  name: kyana_smartwatch_lora
  process:
    - type: sd_trainer
      training_folder: output
      device: cuda:0
      
  network:
    type: lora
    linear: 16
    linear_alpha: 16
    
  save:
    dtype: float16
    save_every: 100
    max_step_saves_to_keep: 3
    
  datasets:
    - folder_path: /path/to/kyana-images
      caption_ext: txt
      caption_dropout_rate: 0.05
      shuffle_tokens: false
      cache_latents_to_disk: true
      resolution: [1024, 1024]
      
  train:
    batch_size: 1
    steps: 3000
    gradient_accumulation_steps: 1
    train_unet: true
    train_text_encoder: false
    gradient_checkpointing: true
    noise_scheduler: flowmatch
    optimizer: adamw8bit
    lr: 1e-4
    lr_scheduler: constant
    
    ema_config:
      use_ema: true
      ema_decay: 0.99
      
    dtype: bf16
    
  model:
    name_or_path: black-forest-labs/FLUX.1-dev
    is_flux: true
    quantize: true
    
  sample:
    sampler: flowmatch
    sample_every: 100
    width: 1024
    height: 1024
    prompts:
      - "Kyana health smartwatch rotating 360 degrees, black device with glossy screen, modular design, white background"
      - "Kyana smartwatch closeup, copper magnetic connectors visible, 6 golden pins, ring frame detail"
      - "Kyana smartwatch with biometric sensors active, green LED lights glowing, bottom view"
      - "Kyana smartwatch with powerbank attached, modular battery system, green LED indicator"
    neg: "blurry, low quality, distorted, deformed, watermark, text"
    seed: 42
    walk_seed: true
    guidance_scale: 4.0
    sample_steps: 20

